{% from "common/macros/image.njk" import image %}

{% extends "layout.njk" %}

{% set style = "common, transport" %}

{% block title %}{{title}} – {{ stationName }}{% endblock %}

{% block content %}
  <h2>
      {{title}}
      {% if stationCount > 1 %}
      {{ image("nearbyred.min", viewExt, { alt: "nahe bei", class: 'icon-inline', height: 20, border: 0 })}}
      {% else %}
      {{ image("stationred.min", viewExt, { alt: "Haltestelle", class: 'icon-inline', height: 20, border: 0 })}}
      {% endif %}
      {{ stationName }}
      {% if stationCount > 1 and radius %}
      (max. {{ radius }} km)
      {% endif %}
  </h2>

  <a href="/departures?station={{ stationName | urlencode }}&radius={{ radius | default(1) }}">
    Zurück
  </a>&nbsp;
  <a href="/departures?radius={{ radius | default(1) }}">Neue Suche</a><br><br>

  {% if departures.length %}
    {% for dep in departures %}
      {% include "departures/partials/departure.njk" %}
    {% endfor %}

    <div style="display:flex; justify-content:space-between; margin-top:12px;">
        {% if earlierIso %}
          <a href="/departures/search?station={{ stationName | urlencode }}&when={{ earlierIso | urlencode }}">
            Frühere Abfahren {{ image("uarrow.min", viewExt, { alt: "↑", class: 'arrow-inline', height: 10, border: 0 }) }}
          </a>
        {% endif %}

        {% if laterIso %}
          <a href="/departures/search?station={{ stationName | urlencode }}&when={{ laterIso | urlencode }}">
            Spätere Abfahrten {{ image("darrow.min", viewExt, { alt: "↓", class: 'arrow-inline', height: 10, border: 0 }) }}
          </a>
        {% endif %}
    </div>
  {% else %}
    <p>Keine Abfahrten gefunden.</p>
  {% endif %}
{% endblock %}
