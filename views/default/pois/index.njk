{% extends "layout.njk" %}

{% set style = "common, pois" %}

{% block title %}POIs{% endblock %}

{% block content %}

<h1>POIs im Umkreis</h1>

<form action="/pois" method="get">
  <label>Ort oder PLZ:</label><br />
  <input type="text" name="q" value="{{ query }}" class="input" />

  {% set rValue = radius %}
  <select name="r" class="input" {% if type == "emergency_pharmacy" %}disabled{% endif %}>
    {% set radiusOptions = [1, 2, 3, 5, 8, 15, 20, 30] %}
    {% for r in radiusOptions %}
      <option value="{{ r }}"{% if rValue == r %} selected{% endif %}>{{ r }} km</option>
    {% endfor %}
  </select>

  <label>Art:</label><br />
  <select name="t" class="input">
    {% for key, label in types %}
      <option value="{{ key }}"{% if type == key %}selected{% endif %}>{{ label }}</option>
    {% endfor %}
  </select>

  <button type="submit" class="btn">Suchen</button>
</form>

{% if results.length > 0 %}
  <ul class="poi-list">
    {% for r in results %}
      {% include "pois/partials/poi-item.njk" %}
    {% endfor %}
  </ul>
{% elseif query %}
  <p>Keine Ergebnisse gefunden.</p>
{% endif %}

<p class="hint">
  Komplett ohne Geolocation. Nur Ortsname oder PLZ.
</p>

<script src="public/js/geo.min.js"></script>

{% endblock %}
